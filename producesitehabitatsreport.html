
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Observation Report</title>
    <script
            src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous">
    </script>
    <script>

        function getreportBySitehabitat(SitehabitatID) {
            Sitehabitat = [];
            $.ajax({
                type: 'Get',
                dataType: 'JSON',
                async: false,
                url: 'http://nzwetland.herokuapp.com/api/Sitehabitat/',
                success: function (data) {


                    var i = 0;
                    while (i < data.length) {
                        Sitehabitat = data[i];
                        $("#show_report").append("<hr>" +
                            " Site Habitat ID : " + Sitehabitat.id + "<br>" +
                            "  Site Habitat Name: " + Sitehabitat.sitehabitatname + "<br>" +
                            " Area: " + Sitehabitat.area + "<br>");

                        site = getsite(Sitehabitat.site);
                        k = 0;
                        while (k < site.length) {
                            $("#show_report").append(
                                " Site Name : " + site[k].sitename + "<br>"
                            );
                            k = k + 1;
                        }

                        habitat = gethabitat(Sitehabitat.habitat);
                        h = 0;
                        while (h < habitat.length) {
                            $("#show_report").append(
                                " Habitat Description: " + habitat[h].description + "<br>"
                            );
                            h = h + 1;
                        }


                    }
                },
                error: function (err) {
                    console.log(err);
                }
            });


            function getsite(site) {
                site = [];
                $.ajax({
                    type: 'Get',
                    dataType: 'JSON',
                    async: false,
                    url: 'http://nzwetland.herokuapp.com/api/site/',
                    success: function (data) {
                        // location.reload();

                        j = 0;
                        while (j < data.length) {
                            site = data[j];
                            if (site.id == animal) {
                                site.push(site);
                            }
                            j = j + 1;
                        }
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
                return site;
            }

            function habitat(habitat) {
                habitat = [];
                $.ajax({
                    type: 'Get',
                    dataType: 'JSON',
                    async: false,
                    url: 'http://nzwetland.herokuapp.com/api/habitat/',
                    success: function (data) {
                        // location.reload();

                        j = 0;
                        while (j < data.length) {
                            habitat = data[j];
                            if (habitat.id == habitat) {
                                habitat.push(habitat);
                            }
                            j = j + 1;
                        }
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
                return habitat;
            };
        }


    </script>
</head>
<body>
<button id="show_report">Display Report</button>
<button >RETURN</a></button>


</body>
</html>
